{"version":3,"sources":["utils/compareTags.js","redux/tagsSlice.js","redux/imagesSlice.js","components/Form/Buttons/Buttons.jsx","components/Form/Input/Input.jsx","components/Form/Tags/Tags.jsx","components/Form/Search.jsx","components/Grid/Image/Image.jsx","components/Grid/Grid.jsx","App.js","redux/store.js","index.js"],"names":["compare","a","b","number","tagsSlice","createSlice","name","initialState","reducers","addTags","state","action","payload","forEach","item","tags","split","tag","existingTag","find","t","push","actions","selectPopularTags","sort","compareTags","slice","fetchImages","createAsyncThunk","dispatch","getState","axios","get","response","data","items","images","status","imagesSlice","error","cancelFetch","extraReducers","builder","addCase","pending","fulfilled","rejected","message","selectImages","selectStatus","Buttons","useDispatch","useSelector","className","onClick","e","preventDefault","type","disabled","Input","setTag","value","onChange","target","placeholder","Tags","role","map","index","Search","useState","Image","source","published","height","tabIndex","title","format","src","alt","Grid","image","media","m","App","enableMapSet","store","configureStore","reducer","imagesReducer","tagsReducer","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.29beeab8.chunk.js","sourcesContent":["export default function compare(a, b) {\n  if (a.number > b.number) {\n    return -1;\n  }\n  if (a.number < b.number) {\n    return 1;\n  }\n  return 0;\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport compareTags from \"../utils/compareTags\";\n\nconst tagsSlice = createSlice({\n  name: \"tags\",\n  initialState: [],\n  reducers: {\n    addTags(state, action) {\n      const items = action.payload;\n      items.forEach((item) => {\n        const tags = item.tags.split(\" \");\n        tags.forEach((tag) => {\n          const existingTag = state.find((t) => t.name === tag);\n          if (existingTag) {\n            existingTag.number += 1;\n          } else {\n            state.push({ name: tag, number: 1 });\n          }\n        });\n      });\n    },\n  },\n});\n\nexport default tagsSlice.reducer;\n\nexport const { addTags } = tagsSlice.actions;\n\nexport const selectPopularTags = (state) => {\n  const tags = [...state.tags];\n  tags.sort(compareTags);\n  return tags.slice(0, 10);\n};\n","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { addTags } from \"./tagsSlice\";\n\nconst initialState = {\n  images: [],\n  status: \"idle\",\n  error: null,\n};\n\nexport const fetchImages = createAsyncThunk(\n  \"images/fetchImages\",\n  async ({ tag }, { dispatch, getState }) => {\n    const response = await axios.get(\n      `http://52.214.226.126:3006/?query=lang-en-us&format=json&tags=${tag}`\n    );\n    const items = await response.data.items;\n    if (getState().images.status !== \"idle\") {\n      dispatch(addTags(items));\n    }\n    return items;\n  }\n);\n\nconst imagesSlice = createSlice({\n  name: \"images\",\n  initialState,\n  reducers: {\n    cancelFetch(state, action) {\n      state.status = \"idle\";\n    },\n  },\n  extraReducers(builder) {\n    builder\n      .addCase(fetchImages.pending, (state, action) => {\n        state.status = \"loading\";\n      })\n      .addCase(fetchImages.fulfilled, (state, action) => {\n        if (state.status !== \"idle\") {\n          state.images = action.payload;\n          state.status = \"idle\";\n        }\n      })\n      .addCase(fetchImages.rejected, (state, action) => {\n        state.status = \"failed\";\n        state.error = action.error.message;\n      });\n  },\n});\n\nexport default imagesSlice.reducer;\n\nexport const { cancelFetch } = imagesSlice.actions;\n\nexport const selectImages = (state) => state.images.images;\nexport const selectStatus = (state) => state.images.status;\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { cancelFetch, fetchImages, selectStatus } from \"../../../redux/imagesSlice\";\n\nfunction Buttons({ tag }) {\n  const dispatch = useDispatch();\n  const status = useSelector(selectStatus);\n\n  const handleSearchClick = (e) => {\n    if (status === \"idle\" && tag) {\n      dispatch(fetchImages({tag}));\n    }\n    e.preventDefault();\n  }\n\n  const handleCancelClick = (e) => {\n    if (status === \"loading\") {\n      dispatch(cancelFetch());\n    }\n    e.preventDefault();\n  }\n\n  return (\n      <div className=\"col-auto\">\n        <button onClick={handleSearchClick} type=\"submit\" className=\"btn btn-primary\" disabled={status !== \"idle\"}>Search</button>\n        {\" \"}\n        <button onClick={handleCancelClick} className=\"btn btn-danger\" disabled={status !== \"loading\"}>Cancel</button>\n      </div>\n  );\n}\n\nexport default Buttons;","function Input({ tag, setTag }) {\n  const handleTagChange = (e) => {\n    setTag(e.target.value);\n  };\n\n  return (\n    <div className=\"col-auto\">\n      <label className=\"visually-hidden\">Tag</label>\n      <input\n        value={tag}\n        onChange={handleTagChange}\n        type=\"text\"\n        className=\"form-control\"\n        placeholder=\"Tag\"\n      />\n    </div>\n  );\n}\n\nexport default Input;\n","import { useSelector } from \"react-redux\";\nimport { selectPopularTags } from \"../../../redux/tagsSlice\";\n\nfunction Tags({ setTag }) {\n  const tags = useSelector(selectPopularTags);\n\n  return (\n    <div\n      className=\"btn-group btn-group-sm flex-wrap\"\n      role=\"group\"\n      aria-label=\"Third group\"\n    >\n      {tags.map((tag, index) => (\n        <button\n          key={index}\n          onClick={() => {\n            setTag(tag.name);\n          }}\n          type=\"button\"\n          className=\"btn btn-secondary m-1\"\n        >\n          {tag.name}\n        </button>\n      ))}\n    </div>\n  );\n}\n\nexport default Tags;\n","import { useState } from \"react\";\nimport Buttons from \"./Buttons/Buttons\";\nimport Input from \"./Input/Input\";\nimport Tags from \"./Tags/Tags\";\n\nfunction Search() {\n  const [tag, setTag] = useState(\"\");\n\n  return (\n    <form className=\"mt-4 row g-3 justify-content-center\">\n      <Input tag={tag} setTag={setTag} />\n      <Buttons tag={tag} />\n      <Tags setTag={setTag} />\n    </form>\n  );\n}\n\nexport default Search;\n","import {format} from \"timeago.js\"\n\nfunction Image({source, published}) {\n  return (\n    <div className=\"flex-fill bg-light m-2 p-1 d-flex align-items-center justify-content-center\" height=\"200\">\n      <span className=\"d-inline-block\" tabIndex=\"0\" data-toggle=\"tooltip\" title={format(published)}>\n        <img src={source} alt=\"\" />\n      </span>\n    </div>\n  )\n}\n\nexport default Image;","import Image from \"./Image/Image\";\nimport { useSelector } from \"react-redux\";\nimport { selectImages } from \"../../redux/imagesSlice\";\n\nfunction Grid() {\n  const images = useSelector(selectImages);\n\n  return (\n    <div className=\"d-flex flex-wrap\">\n      {images.map((image, index) => (\n        <Image key={index} source={image.media.m} published={image.published} />\n      ))}\n    </div>\n  );\n}\n\nexport default Grid;\n","import Search from \"./components/Form/Search\";\nimport Grid from \"./components/Grid/Grid\";\n\nfunction App() {\n  return (\n    <div className=\"container-sm\">\n      <Search />\n      <Grid />\n    </div>\n  );\n}\n\nexport default App;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport imagesReducer from \"./imagesSlice\";\nimport tagsReducer from \"./tagsSlice\";\n\nimport { enableMapSet } from \"immer\";\n\nenableMapSet();\n\nconst store = configureStore({\n  reducer: {\n    images: imagesReducer,\n    tags: tagsReducer,\n  },\n});\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}